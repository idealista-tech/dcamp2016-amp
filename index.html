<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>DrupalCamp 2016 - Activando tu versión AMP</title>

  <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
  <meta name="author" content="Hakim El Hattab">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/solarized.css" id="theme">
  <link rel="stylesheet" href="css/custom.css">

  <!-- Code syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>

  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->
</head>

<body>

<div class="reveal">

  <!-- Any section element inside of this container is displayed as a slide -->
  <div class="slides">
    <section data-background-color="#5ba7d9" data-background="img/bg-portada.jpg" data-background-size="50%" data-background-position="left">
      <h1 align="right" style="width: 50%; margin-left: auto; color: #DA2643;">Activando tu versión AMP</h1>
      <p align="right" style="color: #DA2643;">jansete, mgzrobles</p>
      <p align="right" style="color: #DA2643;">#drupalCampSpain2016</p>
    </section>
    <section>
      <h2>Sobre nosotros</h2>
      <p>
        <img align="left" data-src="img/jansete.jpeg" width="200">
        Juanen Bernal -&nbsp;<a href="https://twitter.com/jansev3n" target="_blank">@jansev3n</a><br>
        <br>
        Drupal Developer en <img style="position: relative; top: 4px; margin:0; margin-left: 10px; border:0; box-shadow: none;" src="img/logo_news.png" width="300"><br>
        <br>
        <a href="http://drupal.org/u/jansete" target="_blank">drupal.org/u/jansete</a>
      </p>
      <hr>
      <p>
        <img align="left" data-src="img/mgzrobles.jpeg" width="200">
        Martín González -&nbsp;<a href="https://twitter.com/mgzrobles" target="_blank">@mgzrobles</a><br>
        <br>
        Drupal Leader en <img style="position: relative; top: 4px; margin:0; margin-left: 10px; border:0; box-shadow: none;" src="img/logo_news.png" width="300"><br>
        <br>
        <a href="http://drupal.org/u/mgzrobles" target="_blank">drupal.org/u/mgzrobles</a>
      </p>
    </section>
    <section>
      <section data-background="img/que-es-amp.jpg">
        <h1 style="text-align: left; color: wheat;">¿Qué es AMP?</h1>
      </section>
      <section>
        <img src="img/mobilefirst.jpg"/>
      </section>
      <section>
        <h2>Cuando una página no carga,</br>
            los editores pierden lectores</br>
            y oportunidades de ingresos</h2>
        <img src="img/mobileslow.jpg"/>
      </section>
      <section data-background="img/dni.png">
      </section>
      <section data-background-color="#607D8B">
        <div style="float:left; width: 70%;">
          <p style="color:#ffffff"><strong style="background: #b62682;">
            Accelerated Mobile Pages</strong> ( AMP )<br>
                                              es un proyecto open source<br>
                                              que pretende ayudar a los editores a crear<br>
            <strong style="background: #b62682;">contenido optimizado para móviles</strong><br>
                                              y que pueda ser<br>
            <strong style="background: #b62682;">cargado instantáneamente</strong><br> en todas partes.</p>
        </div>
        <img src="img/google-amp.png" style="box-shadow: none; border: none;"/>
      </section>
      <section>
        <ul style="  margin-left: 100px;  margin-top: 100px;">
          <li>¿Necesito poner sí o sí una versión AMP?</li>
          <li>¿Sustituye a mi sitio normal?</li>
          <li>¿Puedo poner mi propio css y javascript?</li>
          <li>¿Qué pasa con los vídeos?</li>
          <li>¿Y con la publicidad?</li>
          <li>¿Y la analítica web?</li>
          <li>...........</li>
        </ul>
		<div style="width: 205px;    float: left;">
	<img data-src="img/amp2.png"width="200" style="
    margin: 0;
    border: none;">
	<img style="
    margin: 0;
    border: none;"data-src="img/amp1.png" width="200">
			</div>
      </section>
    </section>
    <section>
      <section>
        <h1>AMP HTML</h1>
        <p>Es HTML extendido con componentes AMP.<br>
           Algunas etiquetas HTML se sustituyen por su equivalente AMP<br>
           Por ejemplo img pasa a ser amp-img</p>
<pre><code data-trim data-noescape>
  <!doctype html>
  &lt;html &#9889;&gt;
  &lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;link rel=&quot;canonical&quot; href=&quot;hello-world.html&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,minimum-scale=1,initial-scale=1&quot;&gt;
  &lt;style amp-boilerplate&gt;body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}&lt;/style&gt;&lt;noscript&gt;&lt;style amp-boilerplate&gt;body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}&lt;/style&gt;&lt;/noscript&gt;
  &lt;script async src=&quot;https://cdn.ampproject.org/v0.js&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;Hello World!&lt;/body&gt;
  &lt;/html&gt;
</code></pre>

      </section>
      <section>
        <h1>AMP JS</h1>
        Librería que implementa las recomentaciones de rendimiento de AMP.
        <ul>
          <li>Proporciona las etiquetas personalizadas (componentes AMP)</li>
          <li>Carga asíncrona de recursos externos para que nada bloquee la página durante el renderizado.</li>
          <li>Precalculado del layout de cada elemento antes de que los recursos se carguen.</li>
        </ul>
      </section>
      <section>
        <h1>Google AMP Cache</h1>
        "We intend to open our cache servers to be used by anyone free of charge."
      </section>
    </section>
    <section>
      <section>
        <h1>¿Cómo AMP mejora el rendimiento?</h1>
      </section>
      <section>
        <!-- @todo Revisar por si sobran puntos -->
        <h3>¿Cómo AMP mejora el rendimiento?</h3>
        <ul>
          <li>Define los tamaños de los recursos</li>
          <li>La carga de las fuentes debe ser eficiente</li>
          <li>Minimiza los recálculos de los estilos</li>
          <li>Sólo ejecuta animaciones aceleradas por hardware (GPU)</li>
          <li>Todo el CSS debe ser en línea y con tamaño máximo</li>
        </ul>
        <aside class="notes">
          Buenas prácticas de Front y optimizaciones
        </aside>
      </section>
      <section>
        <h3>¿Cómo AMP mejora el rendimiento?</h3>
        <ul>
          <li>No permite que los componentes bloqueen el renderizado</li>
          <li>Permite sólo scripts asíncronos</li>
          <li>Los scripts de terceros fuera de la página principal</li>
          <li>Prioriza la carga de recursos</li>
        </ul>
      </section>
      <section data-background="img/pikachu.gif">
        <h1 style="text-shadow: 2px 2px #000;">¡Carga las páginas como un rayo!</h1>
      </section>
    </section>
    <section>
      <section>
        <h1>Creando nuestra primera página AMP</h1>
      </section>
      <section data-background="img/simple-amp.jpg" data-background-size="100%" data-background-position="center">
        <h2 align="right" style="margin-top: -25%">AMP HTML</h2>
        <!-- @todo revisar maquetación -->
        <aside class="notes">
          Comentar por encima los elementos y requerimientos
        </aside>
      </section>
      <section data-background="img/minecraft.jpg">
        <h1 style="color: #b62682;text-shadow: 2px 2px #000;">Componentes AMP</h1>
      </section>
      <section>
        <h2>Incluyendo una imagen</h2>
        <p>Antes:</p>
        <pre>
          <code align="center"><img src="homer.jpg" alt="Homer" height="400" width="800"></code>
        </pre>
        <p>Componente AMP:</p>
        <pre>
          <code align="center"><amp-img src="homer.jpg" alt="Homer" height="400" width="800"></amp-img></code>
        </pre>
        <aside class="notes">
          La mayoría de las etiquetas HTML se pueden usar directamente en AMP HTML, pero ciertas etiquetas como la etiqueta <img> son reemplazadas por sus equivalentes como componentes AMP que se encargan de mejorar el rendimiento.
          Otras etiquetas no permitidas son: iframe, form, input elements, etc →  (https://github.com/ampproject/amphtml/blob/master/spec/amp-html-format.md#html-tags )
        </aside>
      </section>
      <section data-background="img/doubleclick-desktop.jpg" data-background-size="100%">
        <h1 align="right" style="margin-top: -33%">Publicidad</h1>
      </section>
      <section>
        <h2>Publicidad</h2>
        <img data-src="img/doubleclick-amp.jpg" />
        <p>AdSense, DoubleClick o Smart AdServer ya están en la <a href="https://www.ampproject.org/docs/reference/amp-ad.html#supported-ad-networks" target="_blank">lista de servicios compatibles</a>.</p>
        <aside class="notes">
          <amp-ad width=320 height=50
                  type="doubleclick"
                  data-slot="/1234/mobile_ad_banner"></amp-ad>
          Servicios soportadas actualmente: A9, Adform, AdReactor, AdSense, AdTech, Criteo, Dot and Media, DoubleClick, Flite, plista, Smart AdServer, Yieldmo, Revcontent, TripleLift, Teads, I-Mobile
        </aside>
      </section>
      <section>
        <h2>Componentes extendidos</h2>
        <p>Cada componente tiene sus propios atributos y requieren de un script adicional.</p>
        <ul>
          <li>amp-youtube</li>
          <li>amp-analytics</li>
          <li>amp-audio</li>
          <li>amp-carousel</li>
          <li>amp-facebook</li>
          <li>amp-iframe</li>
          <li>amp-lightbox</li>
          <li><a href="https://www.ampproject.org/docs/reference/extended.html" target="_blank">etc</a></li>
        </ul>
      </section>
      <section>
        <h2>Youtube</h2>
        <p>Antes:</p>
        <img data-src="img/youtube-desktop.jpg" />
      </section>
      <section>
        <h2>Youtube</h2>
        <p>Script:</p>
        <img data-src="img/youtube-script-amp.jpg" />
        <p>Componente AMP:</p>
        <img data-src="img/youtube-amp.jpg" width="400" />
      </section>
      <section>
        <h2>Analytics</h2>
        <p>Antes:</p>
        <img data-src="img/xiti-desktop.png" />
      </section>
      <section>
        <h4>Analytics</h4>
        <img data-src="img/xiti-amp.jpg" width="500"/>
        <p>AT Internet, Chartbeat, comScore,  o Google Analytics ya están en la <a href="https://www.ampproject.org/docs/reference/extended/amp-analytics.html#analytics-vendors" target="_blank">lista de servicios compatibles</a>.</p>
      </section>
      <section data-background="img/homer-makeup-gun.gif">
        <h1 style="color: #FFF; text-shadow: 2px 2px #000;">Cambiando la presentación</h1>
      </section>
      <section>
        <h2>Cambiando la presentación</h2>
        <ul>
          <li>Usaremos una única etiqueta <code>&lt;style amp-custom&gt;</code> dentro de la etiqueta <code>&lt;head&gt;</code></li>
          <li><a href="https://www.ampproject.org/docs/guides/responsive/style_pages.html#disallowed-styles" target="_blank">Algunos estilos</a>, <a href="https://www.ampproject.org/docs/guides/responsive/style_pages.html#white-listed-transition-and-animation-properties" target="_blank">transiciones y animaciones</a> no están permitidos, como:
            <ul>
              <li>!important</li>
              <li>filter</li>
              <li>selectores universales: *, :not()</li>
            </ul>
          </li>
          <li>Excepción con las fuentes custom</li>
          <li>Límite de tamaño de 50 kilobytes</li>
          <li>Valida tu CSS</li>
        </ul>
        <aside class="notes">
          Hablar que śolo una única etiqueta style, y no se pueden meter styles como atributos html
          <code><style amp-custom></style></code>
          <code><head></head></code>
        </aside>
      </section>
      <section>
        <div style="float:left; width: 50%; margin-top: 20%;">
        <h2>Previsualización</h2>
        <p>Como cualquier HTML podemos abrirlo directamente con el navegador. Aunque es recomendable que corra bajo un servidor web.</p>
        </div>
        <img data-src="img/example-browser.png" align="right" width="330" style="margin-right: 5%; margin-top: 0%;" />
      </section>
      <section>
        <h2>Validación</h2>
        <p>Añadiendo #development=1</p>
        <p>http://localhost:8000/released.amp.html#development=1</p>
        <img style="margin-left: 5%;" align="left" data-src="img/error-validation.jpg" width="400" />
        <img style="margin-right: 5%;" align="right" data-src="img/success-validation.png" width="417" />
        <aside class="notes">Ver otros navegadores</aside>
      </section>
      <section>
        <h2>Validación</h2>
        <p>También puedes emular un dispositivo móvil desde Chrome y abrir <a href="https://g.co/ampdemo" target="_blank">https://g.co/ampdemo</a></p>
        <img style="margin-left: 5%;" align="left" data-src="img/browser-force-amp-search.png" />
        <img style="margin-right: 5%;" align="right" data-src="img/browser-force-amp-search-1.png" />
      </section>
      <section>
        <h2>Prepara tu página AMP para su distribución</h2>
        <p>Relacionamos la versión normal con la versión AMP</p>
        <pre><code><link rel="amphtml" href="https://www.example.com/url/to/amp/document.html"></code></pre>
        <p>Relacionamos la versión AMP con la versión básica</p>
        <pre><code><link rel="canonical" href="https://www.example.com/url/to/full/document.html"></code></pre>
        <p>Si sólo tienes versión AMP</p>
        <pre><code><link rel="canonical" href="https://www.example.com/url/to/amp/document.html"></code></pre>
      </section>
      <section>
        <h1 style="line-height: 100%;">Microformatos: Schema.org</h1>
        <img data-src="img/top-stories-3.jpg" width="600" />
      </section>
      <section>
        <img data-src="img/schemaorg-amp.jpg" width="1024"/>
        <aside class="notes">
          Comentar
        </aside>
      </section>
      <section>
        <h2>Validación de Schema.org</h2>
        <p><a href="https://developers.google.com/structured-data/testing-tool" target="_blank">https://developers.google.com/structured-data/testing-tool</a></p>
        <img data-src="img/schemaorg-validator.png" width="600"/>
      </section>
    </section>
    <section>
      <section data-background="img/drupal-meet.jpg">
        <h1 style="color: white; text-shadow: 2px 2px #000;">¿Y ahora qué? Drupal y AMP</h1>
      </section>
      <section>
        <h2>Drupal y AMP</h2>
        <img data-src="img/lullabot-logo.png" width="200" style="box-shadow: none; border:0;">
        <ul>
          <li>El módulo AMP: <a href="https://www.drupal.org/project/amp" target="_blank">https://www.drupal.org/project/amp</a></li>
          <li>El theme AMP: <a href="https://www.drupal.org/project/amptheme" target="_blank">https://www.drupal.org/project/amptheme</a></li>
          <li>La librería AMP: <a href="https://github.com/Lullabot/amp-library" target="_blank">https://github.com/Lullabot/amp-library</a></li>
        </ul>
        <aside class="notes">
          La funcionalidad de las versiones de D7 y D8 son iguales.
          Desde finales del 2015, Lullabot está trabajando en el desarrollo de la integración de AMP con Drupal, hace poco empezaron a salir las primeras versiones beta.
        </aside>
      </section>
      <section>
        <h2>Cómo funcionan los proyectos AMP en Drupal 7</h2>
        <ul>
          <li>PHP 5.5+</li>
          <li>Lullabot AMP Library</li>
          <li>composer_manager, amptheme, amp</li>
          <li>beta</li>
        </ul>
        <aside class="notes">
          Falla
          <ul>
            <li>composer_manager necesita un parche en D8</li>
            <li>is_amp_request falla en D7</li>
            <li>El modo debugger de momento no funciona bien</li>
            <li>La librería no elimina todas las etiquetas prohibidas por AMP</li>
          </ul>
          Comentar diferencias sustanciales con D8 si las hay
        </aside>
      </section>
      <section>
        <h2>Demo</h2>
        <a href="http://local.drupalbirras/" target="_blank">
          <img data-src="img/finn.gif" width="700" />
        </a>
      </section>
      <section>
        <h4>Workflow</h4>
        <img data-src="img/workflow-amp-contrib.png" width="780" style="border:0; box-shadow: none;" />
      </section>
      <section>
        <h1>Contrib vs Custom</h1>
      </section>
      <section>
        <h3>Contrib</h3>
        <ul>
          <li>Hay una gran empresa detrás: Lullabot</li>
          <li>La idea es muy buena:
            <ul>
              <li>Módulo sencillo de entender</li>
              <li>AMP View mode</li>
              <li>AMP Field Formatters</li>
              <li>AMP Theme</li>
              <li>Librería: Convierte y valida AMP HTML</li>
              <li>Proporciona Bloques</li>
              <li>Fácil de configurar</li>
            </ul>
          </li>
        </ul>
      </section>
      <section>
        <h3>Custom</h3>
        <ul>
          <li>Contrib todavía no funciona bien del todo</li>
          <li>PHP 5.3+</li>
          <li>Ampliando el contrib
            <ul>
              <li>Soporte para otros componentes AMP</li>
              <li>Schema.org, necesario para Top Stories</li>
              <li>¿Context? Desactiva bloques definiendo tus condiciones</li>
              <li>Varnish + Expire</li>
            </ul>
          </li>
          <pre><code>if (req.url  ~ "^/(.*)[?|&]amp(.*)") {
  unset req.http.Cookie;
}
...
set beresp.ttl = 2w;</code></pre>
          <p>¡Aprovecha y contribuye!</p>
        </ul>
      </section>
      <!-- section>
        <h1>Custom, te eligo a ti</h1>
      </section>
      <section>
        <h3>Funcionalidad recomandable</h3>
        <ul>
          <li>Saber cuando una petición es AMP</li>
          <li>Utilizar un nuevo theme para AMP</li>
          <li>View mode para AMP</li>
          <li>Criterios para que tu contenido tenga versión AMP</li>
          <li>Formatters</li>
          <li>Quitar bloques innecesarios</li>
          <li>Comando drush para generar versiones AMP</li>
          <li>Implementación custom de componentes</li>
        </ul>
      </section -->
    </section>
    <section>
      <h2>Enlaces de interés</h2>
      <ul>
        <li>Página del proyecto: <a href="https://www.ampproject.org" target="_blank">https://www.ampproject.org</a></li>
        <li>Proyecto github de AMP: <a href="https://github.com/ampproject" target="_blank">https://github.com/ampproject</a></li>
        <li>Proyecto AMP en Drupal: <a href="https://www.drupal.org/project/amp" target="_blank">https://www.drupal.org/project/amp</a></li>
        <li>Theme de AMP en Drupal: <a href="https://www.drupal.org/project/amptheme" target="_blank">https://www.drupal.org/project/amptheme</a></li>
        <li>Librería de Lullabot AMP PHP: <a href="https://github.com/Lullabot/amp-library" target="_blank">https://github.com/Lullabot/amp-library</a></li>
        <li>Schema.org para Top Stories: <a href="https://developers.google.com/structured-data/carousels/top-stories" target="_blank">https://developers.google.com/structured-data/carousels/top-stories</a></li>
      </ul>
    </section>
    <section data-background="img/cartman.jpg">
      <h1 style="color: orange; text-shadow: 2px 2px #000; font-size: 6em;">¿Preguntas?</h1>
    </section>
    <section data-background="img/gracias.jpg">
      <h1 style="font-size: 7em; text-align: right; margin-top: 40%; margin-right: -10%; color: #C0D3F3;">racias</h1>
    </section>
  </div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

  // Full list of configuration options available at:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,

    transition: 'slide', // none/fade/slide/convex/concave/zoom

    // Optional reveal.js plugins
    dependencies: [
      { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'plugin/zoom-js/zoom.js', async: true },
      { src: 'plugin/notes/notes.js', async: true }
    ]
  });

</script>

</body>
</html>
